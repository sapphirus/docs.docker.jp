.. -*- coding: utf-8 -*-
.. URL: https://docs.docker.com/engine/logging/splunk/
.. SOURCE: https://github.com/docker/docker/blob/master/docs/admin/logging/splunk.md
   doc version: 1.12
      https://github.com/docker/docker/commits/master/docs/admin/logging/splunk.md
.. check date: 2016/06/13
.. Commits on Jun 1, 2016 a9f6d93099283ee06681caae7fe29bd1b2dd4c77
.. -------------------------------------------------------------------

.. Splunk logging driver

.. _splunk-logging-driver:

=======================================
Splunk ロギング・ドライバ
=======================================

.. sidebar:: 目次

   .. contents:: 
       :depth: 3
       :local:

.. The splunk logging driver sends container logs to HTTP Event Collector in Splunk Enterprise and Splunk Cloud.

``splunk`` ロギング・ドライバは、コンテナのログを Splunk Enterprise もしくは Splunk Cloud の `HTTP Event Collector <http://dev.splunk.com/view/event-collector/SP-CAAAE6M>`_ に送ります。

.. Usage

使い方
==========

.. You can configure the default logging driver by passing the --log-driver option to the Docker daemon:

デフォルトのロギング・ドライバを変更するには、Docker デーモンに ``--log-driver`` オプションを付けます。


.. code-block:: bash

    docker daemon --log-driver=splunk

.. You can set the logging driver for a specific container by using the --log-driver option to docker run:

特定のコンテナに対してロギング・ドライバを指定するには、 ``docker run`` の実行時に ``--log-driver`` オプションを付けます。

.. code-block:: bash

   docker run --log-driver=splunk ...

.. Splunk options

.. _splunk-options:

Splunk オプション
====================

.. You can use the --log-opt NAME=VALUE flag to specify these additional Splunk logging driver options:

Splunnk ロギング・ドライバでは、``--log-opt 名前=値`` フラグを指定できます。

.. list-table::
   :header-rows: 1

   * - オプション
     - 必須
     - 説明
   * - ``splunk-token``
     - 必須
     - Splunk HTTP Event Collector トークンを指定
   * - ``splunk-url``
     - 必須
     - Splunk Enterprise または Splunk Cloud インスタンスに対するパス（HTTP Event Collector の使うポートとスキームを含む） ``https://your_splunk_instance:8088``
   * - ``splunk-source``
     - オプション
     - イベント・ソース
   * - ``splunk-sourcetype``
     - オプション
     - イベント・ソースのタイプ
   * - ``splunk-index``
     - オプション
     - Event インデックス
   * - ``splunk-capath``
     - オプション
     - root 証明書のパス
   * - ``splunk-caname``
     - オプション
     - サーバ証明書に使う有効な名前。デフォルトでは ``splunk-url`` で指定したホスト名が使われる。
   * - ``splunk-insecureskipverify``
     - オプション
     - サーバ証明書の認証を無効化。
   * - ``splunk-tag``
     - オプション
     - メッセージに対するタグを指定。いくつかのマークアップを利用可能。デフォルトの値は ``{{.ID}}`` （コンテナ ID の12文字）。ログのタグ書式のカスタマイズ方法は、 :doc:`log_tags` を参照。
   * - ``splunk-labels``
     - オプション
     - メッセージに含めるラベルを、カンマ区切りのキーで指定できる。ラベルはコンテナで指定できる。
   * - ``splunk-env``
     - オプション
     - メッセージに含める環境変数を、カンマ区切りのキーで指定できる。これらの変数はコンテナで指定できる。

.. If there is collision between label and env keys, the value of the env takes precedence. Both options add additional fields to the attributes of a logging message.

``label`` と ``env`` のキーが重複する場合は、 ``env`` が優先されます。どちらのオプションも、ロギング・メッセージの追加フィールドに追加できるものです。

.. Below is an example of the logging option specified for the Splunk Enterprise instance. The instance is installed locally on the same machine on which the Docker daemon is running. The path to the root certificate and Common Name is specified using an HTTPS scheme. This is used for verification. The SplunkServerDefaultCert is automatically generated by Splunk certificates.

以下はロギング・ドライバに Splunk Enterprise インスタンスを指定する例です。インスタンスは Docker デーモンを実行している同じマシン上のローカルにインストールされています。root 証明書とコモンネームの指定には HTTP スキームを使います。これが証明書の使い方です。 ``SplunkServerDefaultCert`` は自動的に生成された Splunk 証明書です。

.. code-block:: bash

   docker run --log-driver=splunk \
       --log-opt splunk-token=176FCEBF-4CF5-4EDF-91BC-703796522D20 \
       --log-opt splunk-url=https://splunkhost:8088 \
       --log-opt splunk-capath=/path/to/cert/cacert.pem \
       --log-opt splunk-caname=SplunkServerDefaultCert
       --log-opt tag="{{.Name}}/{{.FullID}}"
       --log-opt labels=location
       --log-opt env=TEST
       --env "TEST=false"
       --label location=west
       your/application

.. seealso:: 

   Splunk logging driver
      https://docs.docker.com/engine/admin/logging/splunk/
