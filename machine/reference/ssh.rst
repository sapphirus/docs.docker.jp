.. -*- coding: utf-8 -*-
.. URL: https://docs.docker.com/machine/reference/ssh/
.. SOURCE: https://github.com/docker/machine/blob/master/docs/reference/ssh.md
   doc version: 1.11
      https://github.com/docker/machine/commits/master/docs/reference/ssh.md
.. check date: 2016/04/28
.. Commits on Nov 27, 2015 68e6e3f905856bc1d93cb5c1e99cc3b3ac900022
.. ----------------------------------------------------------------------------

.. ssh

.. _machine-ssh:

=======================================
ssh
=======================================

.. sidebar:: 目次

   .. contents:: 
       :depth: 3
       :local:

.. Log into or run a command on a machine using SSH.

SSH でマシンにログインするか、コマンドを実行します。

.. To login, just run docker-machine ssh machinename:

ログインするには、 ``docker-machine ssh マシン名`` を実行するだけです。

.. code-block:: bash

   $ docker-machine ssh dev
                           ##        .
                     ## ## ##       ==
                  ## ## ## ##      ===
              /""""""""""""""""\___/ ===
         ~~~ {~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~
              \______ o          __/
                \    \        __/
                 \____\______/
    _                 _   ____     _            _
   | |__   ___   ___ | |_|___ \ __| | ___   ___| | _____ _ __
   | '_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ '__|
   | |_) | (_) | (_) | |_ / __/ (_| | (_) | (__|   <  __/ |
   |_.__/ \___/ \___/ \__|_____\__,_|\___/ \___|_|\_\___|_|
   Boot2Docker version 1.4.0, build master : 69cf398 - Fri Dec 12 01:39:42 UTC 2014
   docker@boot2docker:~$ ls /
   Users/   dev/     home/    lib/     mnt/     proc/    run/     sys/     usr/
   bin/     etc/     init     linuxrc  opt/     root/    sbin/    tmp      var/

.. You can also specify commands to run remotely by appending them directly to the docker-machine ssh command, much like the regular ssh program works:

``docker-machine ssh`` コマンドは通常の ``ssh`` プログラムが動作するように、リモートで直接実行するコマンドを指定することも可能です。

.. code-block:: bash

   $ docker-machine ssh dev free
                total         used         free       shared      buffers
   Mem:       1023556       183136       840420            0        30920
   -/+ buffers:             152216       871340
   Swap:      1212036            0      1212036

.. Commands with flags will work as well:

コマンドに対するフラグも、同様に動作します。

.. code-block:: bash

   $ docker-machine ssh dev df -h
   Filesystem                Size      Used Available Use% Mounted on
   rootfs                  899.6M     85.9M    813.7M  10% /
   tmpfs                   899.6M     85.9M    813.7M  10% /
   tmpfs                   499.8M         0    499.8M   0% /dev/shm
   /dev/sda1                18.2G     58.2M     17.2G   0% /mnt/sda1
   cgroup                  499.8M         0    499.8M   0% /sys/fs/cgroup
   /dev/sda1                18.2G     58.2M     17.2G   0%
   /mnt/sda1/var/lib/docker/aufs

.. If you are using the “external” SSH type as detailed in the next section, you can include additional arguments to pass through to the ssh binary in the generated command (unless they conflict with any of the default arguments for the command generated by Docker Machine). For instance, the following command will forward port 8080 from the default machine to localhost on your host computer:

「外部の」SSH タイプを使う場合の詳細については、次のセクションで説明します。 ``ssh`` バイナリを実行するコマンドには（ Docker Machine によって作成されるコマンドと衝突しない限り）追加オプションを設定できます。例えば、次のコマンドは ``default`` マシンから自分のホスト・コンピュータ上の ``localhost`` に対して、ポート 8080 に転送するコマンドです。

.. code-block:: bash

   $ docker-machine ssh default -L 8080:localhost:8080

.. Different types of SSH

異なる種類の SSH
====================

.. When Docker Machine is invoked, it will check to see if you have the venerable ssh binary around locally and will attempt to use that for the SSH commands it needs to run, whether they are a part of an operation such as creation or have been requested by the user directly. If it does not find an external ssh binary locally, it will default to using a native Go implementation from crypto/ssh. This is useful in situations where you may not have access to traditional UNIX tools, such as if you are using Docker Machine on Windows without having msysgit installed alongside of it.

Docker Machine が呼び出される時、伝統的な ``ssh`` バイナリがローカルにあるかどうか確認し、SSH コマンドを使う必要があれば、これを使おうとします。使う場面とは、create 時のような内部処理か、利用者が必要な時に明示するかどうかに拘わりません。外部の ``ssh`` バイナリがローカルに存在しなければ、Go 言語内蔵の `crypto/ssh <https://godoc.org/golang.org/x/crypto/ssh>`_ を使おうとします。これは伝統的な UNIX ツールが利用できない環境で便利になるでしょう。例えば、Windows 上で Docker Machine を 使う時に、 msysgit がインストールされていなくても使えます。

.. In most situations, you will not have to worry about this implementation detail and Docker Machine will act sensibly out of the box. However, if you deliberately want to use the Go native version, you can do so with a global command line flag / environment variable like so:

多くの場合、実装の詳細について考慮する必要はありません。Docker Machine は難しい設定をしなくても利用できます。しかし、Go ネイティブ・バージョンを敢えて使おうとする場合は、グローバルなコマンドライン上のフラグ、または、環境変数の指定が必要です。

.. code-block:: bash

   $ docker-machine --native-ssh ssh dev

.. There are some variations in behavior between the two methods, so please report any issues or inconsistencies if you come across them.

２つの手法は様々なパターンを伴いますので、何らかの問題や一貫性が無い場合があれば、ご報告ください。

.. seealso:: 

   ssh
      https://docs.docker.com/machine/reference/ssh/
